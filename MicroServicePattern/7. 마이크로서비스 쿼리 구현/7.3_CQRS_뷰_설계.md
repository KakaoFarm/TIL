# 7.3 CQRS 뷰 설계

## 중요한 설계 결정 사항

-   DB를 선정하고 스키마를 설계해야 한다.
-   데이터 접근 모듈을 설계할 때 멱등한/동시 업데이트 등 다양한 문제를 고려해야 한다.
-   기존 애플리케이션에 새 뷰를 구현하거나 기존 스키마를 바꿀 경우, 뷰를 효율적으로 빌드할 수 있는 수단 강구
-   뷰 클라이언트에서 복제 시차를 어떻게 처리할지 결정

<br />

## 7.3.1 뷰 DB 선택

### SQL 대 NoSQL DB

#### NoSQL DB

-   대부분 트랜잭션 기능이 제한적이고 범용적인 쿼리 능력이 없듬.
-   어떤 유스 케이스는 유연한 데이터 모델, 우수한 성능/확장성 등 SQL기반 DB보다 더 나음.
-   CQRS 뷰와 잘 맞는 편.

#### SQL DB

-   최신 RDBMS는 예전보다 성능이 뛰어남
-   대부분의 개발자들은 SQL DB가 NoSQL 보다 익숙
-   확장판으로 비관계형 기능(예: 지리 공간 데이터형 및 쿼리)을 추가
-   리포팅 엔진(reporting engine)

### 업데이트 작업 지원

-   일부 DB 자료형은 외래키 기반의 업데이트 작업을 효율적으로 지원,
-   NoSQL DB에서는 비기본키(non-primary key) 기반으로 업데이트하기가 쉽지 않음.
    -   기본키 기반의 수정/삭제만 지원되는 DynamoDB를 사용한다면, DynamoㅎDB 보조 인덱스(secondary index)를 쿼리해서 수정/삭제할 항목의 기본키를 결정해야 함.

<br />
