# 3.3 비동기 메시징 패턴 응용 통신

메시징: 서비스가 메시지를 서로 비동기적으로 주고받는 통신 방식.

-   서비스 간 중개 역할을 하는 메시지 브로커 사용
-   직접 서로 통신하는 브로커리스 아키텍처

클라이언트는 비동기 메시징을 통해 서비스를 호출

## 3.3.1 메시징 개요

-   메시지는 메시지 채널을 통해 교환한다.
-   애플리케이션 또는 서비스가 채널에 메시지를 쓰면 수신자(애플리케이션 또는 서비스)는 채널에서 메세지를 읽음.

### 메시지

헤더(header): 송신된 데이터에 관한 메타데이터에 해당하는 키/값들로 구성

-   송신자 또는 메시징 인프라에서 생성된 메시지 ID, 응답이 출력될 메시지 채널을 가리키는 반환 주소 포함

본문(body): 실제로 송신할 텍스트 또는 이진 포맷의 데이터

-   문서(document): 데이터만 포함된 제너릭한 메시지.
-   커맨드(command): RPC 요청과 동등한 메시지
-   이벤트(event): 송신자에게 어떤 사건이 발생했음을 알리는 메시지. 대부분 도메인 객체의 상태 변화를 나타내는 도메인 이벤트

### 메시지 채널

메시지는 채널을 통해 교환.
<img src="https://thebook.io/img/007035/128.jpg" width="100%">

#### 채널의 종류

-   점대점(point-to-point) 채널: 채널을 읽는 컨슈머 중 딱 하나만 지정하여 메시지를 전달.
-   발행-구독(publish-subscribe): 같은 채널을 바라보는 모든 컨슈머에 메시지를 전달. (Ex. 이벤트 메시지)

## 개념정리

[RPC](https://velog.io/@jakeseo_me/RPC%EB%9E%80)
