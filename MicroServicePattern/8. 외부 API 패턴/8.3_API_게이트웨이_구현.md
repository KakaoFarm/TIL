# 8.3 API 게이트웨이 구현

<b> API 게이트웨이를 구현하는 방법 </b>

-   기성(off-the-shelf) API 게이트웨이 제품/서비스를 활용: 개발 노력은 거의 안들지만 유연성이 제일 떨어짐. 기성 API 게이트웨이 제품은 대체로 API 조합을 지원하지 않음.

-   API 게이트웨이 프레임워크 또는 웹 프레임워크를 기반으로 API 게이트웨이를 직접 개발: 가장 유연한 접근 방식이지만, 적잖은 개발 노력이 투입

<br />

## 8.3.1 기성 API 게이트웨이 제품/서비스 활용

### AWS API 게이트웨이

-   하나 이상의 HTTP 메서드를 지원하는 REST 리소스 세트
-   API 게이트웨이 요건을 대부분 충족
-   처음에 구성만 잘 해두면 확장 등 나머지 일은 모두 AWS가 알아서 처리하므로 직접 설치/운영을 신경쓸 일이 없음.
-   API 조합을 지원하지 않기 때문에 직접 백엔드 서비스에 조합 로직을 구현해야 함.
-   주로 JSON 위주의 HTTP(S)만, 서버 쪽 디스커버리 패턴만 지원

### AWS 애플리케이션 부하 분산기

AWS ALB(Application Load Balancer): HTTP, HTTPS, 웹 소켓, HTTP/2용 부하 분산기

-   API 게이트웨이로서의 기본적인 요건 어느정도 축족
-   기능이 제한적이고 HTTP 메서드 기반의 라우팅, API 조합, 인증 같은 로직이 없음.

### 다른 API 게이트웨이 제품

콩(Kong) 이나 트래픽(Traefik) 등 직접 설치/운영할 수 있는 오픈 소스 제품도 있음.

-   강력한 라우팅, 엣지 기능이 탑재
-   API 조합은 여전히 지원하지 않음.

<br />

## 8.3.2 API 게이트웨이 자체 개발

### 검토해야 할 이슈

-   코딩 복잡도를 최소화할 수 있는 라우팅 규칙 정의 메커니즘을 구현
-   HTTP 헤더 처리 등 HTTP 프록시 로직을 정확히 구현

### 넷플릭스 주울

라우팅, 사용량 제한, 인증 같은 엣지 기능이 탑재된 프레임워크

-   HTTP 요청을 변환하는 필터 체인을 적절히 조합해서 요청을 처리하고, 백엔드 서비스를 호출 후 클라이언트에 반환하기 직전에 응답을 가공

-   라우팅과 엣지 기능을 처리하며, API 조합이 구현된 스프링 MVC 컨트롤러를 정의하면 확장 가능
    -   `[단점]` 경로 기반의 라우팅만 지원됨.
