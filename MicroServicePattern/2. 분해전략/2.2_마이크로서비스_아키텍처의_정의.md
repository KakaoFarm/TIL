# 2.2 마이크로서비스 아키텍처 정의

## 아키텍처 정의

1. 애플리케이션 요건을 핵심요청으로 추출
    - 시스템 작업은 애플리케이션이 처리하는 요청을 추상화한 것.
2. 어떻게 여러 서비스로 분해할지 결정.
3. 서비스별로 API 정의.

<br />

## 분해 과정의 장애물

1. 네트워크 지연(network latency)
2. 서비스 간 동기 통신으로 인해 가용성이 떨어짐. -> 자기 완비형 서비스로 해결
3. 여러 서비스에 걸쳐 데이터 일관성을 지키는 요건. -> 보통 사가로 해결
4. 애플리케이션 도처에 숨어 있는 만능 클래스 -> DDD 개념 활용

<br />

## 2.2.1 시스템 작업 식별

### 시스템 작업

-   1단계: 시스템 작업을 기술하기 위해 필요한 보케블러리를 제공하는 핵심 클래스로 구성된 고수준의 도메인 모델을 생성.
-   2단계: 시스템 작업 식별 후 그 동작을 도메인 모델 관점에서 기술

도메인 모델은 주로 사용자 스토리의 명사에서, 시스템 작업은 주로 동사에서 도출.

### 고수준 도메인 모델 생성

도메인 모델은 스토리에 포함된 명사를 분석하고, 도메인 전문가와 상담하는 등 표준 기법을 활용하여 생성

### 시스템 작업 정의

애플리케이션이 어떤 요청을 처리할지 식별하는 단계

#### 시스템 작업의 종류

시스텀 커맨드를 식별하려면 사용자 스토리/시나리오에 포함된 동사를 먼저 분석

-   커맨드(command): 데이터 생성, 수정, 삭제
    -   매개변수, 반환값, 동작 방식의 명세를 도메인 모델 클래스로 정의
    -   명세는 작업 호출 시 충족되어야 할 선행조건, 작업 호출 후 충족되어야 할 후행 조건으로 구성
-   쿼리(query): 데이터 읽기
