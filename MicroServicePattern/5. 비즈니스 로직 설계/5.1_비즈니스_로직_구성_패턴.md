# 5.1 비즈니스 로직 구성 패턴

## 주문서비스

5장은 주문서비스 예시를 통해 이루어집니다.

### 어댑터

-   REST API 어댑터: 비즈니스 로직을 호출하는 REST API가 구현된 인바운드 어댑터
-   OrderCommandHandler: 메시지 채널에서 들어온 커맨드 메시지를 받아 비즈니스 로직을 호출하는 인바운드 어댑터
-   DB 어댑터: 비즈니스 로직이 DB 접근을 위해 호출하는 아웃바운드 어댑터
-   도메인 이벤트 발행 어댑터: 이벤트를 메시지 브로커에 발행하는 아웃바운드 어댑터

<br />

## 5.1.1 비즈니스 로직 설계: 트랜잭션 스크립트 패턴

-   객체지향적 접근이 너무 지나칠 때 스크립트 패턴을 적용하여 절차적인 코드를 작성.
-   트랜잭션 스크립트라는 메서드를 작성하여 표현 계층에서 들어온 요청을 처리.
-   특징: 동작(behavior)이 구현된 클래스와 상태(state)를 보관하는 클래스가 따로 존재

<br />

## 5.1.2 비즈니스 로직 설계: 도메인 모델 패턴

비즈니스 로직이 복잡할 때, 지극히 단순한 애플리케이션 개발이 아닐때는 도메인 모델 패턴을 사용하자.

-   대부분 상태와 동작을 가진 클래스로 구성
-   서비스 메서드가 단순.
    -   거의 항상 비즈니스 로직이 잔뜩 포함된 영속화 도메인 객체에 위임.
    -   서비스 메서드가 DB에서 도메인 객체를 로드, 메서들 중 하나를 호출
    -   Entity 클래스의 상태값은 프라이빗 해서 메서드를 통한 간접 접근만 가능.

### 객체지향의 장점

1. 설계를 이해/관리하기 쉬움.
2. 테스트 하기 쉬움.
3. 잘 알려진 설계 패턴을 응용할 수 있기 때문에 확장하기 쉬움.

-   그럼에도 개선해야 할 사항이 있기 때문에 DDD가 필요
