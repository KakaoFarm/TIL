# 5.3 도메인 이벤트 발행

-   DDD 맥락에서 도메인 이벤트는 애그리거트에 발생한 사건.
-   도메인 이벤트는 도메인 모델에서는 클래스로 표현되며, 대부분 어떤 상태 변경을 나타냄
-   애그리거트는 뭔가 생성되거나 중요한 변경이 발생했을 때 도메인 이벤트를 발행.

<br />

## 5.3.1 변경 이벤트를 발행하는 이유

다른 구성원(사용자, 다른 애플리케이션 또는 같은 애플리케이션 내부의 다른 컴포넌트)들이 애그리거트의 상태 변경을 궁금해하기 때문.

### 상황

-   코레오그래피 사가를 이용하여 여러 서비스에 걸쳐 데이터 일관성을 유지.
-   레플리카를 둔 서비스에 소스 데이터가 변경되었음을 알림.
-   미리 등록된 웹훅이나 메시지 브로커를 통해 비즈니스 프로세스의 다음단계를 진행하도록 알림.
-   사용자 브라우저에 웹 소켓 메시지, Elastic Search 같은 텍스트 DB를 업데이트 하기 위해.
-   사용자에게 text 형식으로 알릴 때
-   애플리케이션이 제대로 작동되고 있는지 도메인 이벤트를 모니터링.
-   사용자 행동을 모델링하기 위해 이벤트 분석

<br />

## 5.3.2 도메인 이벤트란 무엇인가?

도메인 이벤트는 과겨 분사향 동사로 명명한 클래스.

### 프로퍼티

이벤트에 의미 부여

-   원시 값(primitive value)
-   밸류 객체(value object)

### 메타데이터

-   상위 클래스에 정의된 이벤트 객체의 일부이거나, 이벤트 객체를 감산 엔벨로프 객체(envelope object)에 있음.
-   변경을 일으킨 사용자 신원 정보를 넣기도 하는데, 감사(audit) 용도로 좋음.
-   이벤트 ID
-   타임 스탬프
