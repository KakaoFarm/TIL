# 5.2 도메인 모델 설계: DDD 애그리거트 패턴

## Description

### 전톡적인 객체 지향 설계에 기반한 도메인 모델

-   클래스와 클래스 간 관계를 모아 놓은 것.
-   클래스는 보통 패키지로 구성
-   서로 연관된 클래스가 그물망처럼 얽혀있음.
-   어떤 클래스가 비즈니스 객체의 일부인지 경계가 분명하지 않음.

<br />

## 5.2.1 불분명한 경계 문제

-   경계가 분명하지 않으면 비즈니스 객체를 업데이트할 때 문제가 생길 수 있다.
-   비즈니스 객체는 대부분 불변 값(invariant)이 있고 필히 준수해야 할 비즈니스 규칙이 존재.

<br />

## 개념

-   `낙관적 락(opimistic lock)`: DB 충돌 상황을 개선할 수 있는 방법 중 2번째인 수정할 때 내가 먼저 이 값을 수정했다고 명시하여 다른 사람이 동일한 조건으로 값을 수정할 수 없게 하는 것.
    -   DB에서 제공해주는 특징을 이용하는 것이 아닌 Application Level에서 잡아주는 Lock
-   `비관적 락(pessimistic lock)`: Reeatable Read 또는 Serializable 정도의 격리성 수준에서 가능. 트랜잭션이 시작될 때 Shared Lock 또는 Exclusive Lock을 걸고 시작하는 방법

<br />

## Reference

-   [[database] 낙관적 락(Optimistic Lock)과 비관적 락(Pessimistic Lock)](https://sabarada.tistory.com/175)
