# 6.3 사가와 이벤트 소싱을 접목

사가와 이벤트 소싱 기반의 비즈니스 로직을 연계.

-   이벤트 소싱에서는 코레오그래피 사가를 쉽게 이용
-   이벤트 소싱 기반의 비즈니스 로직을 오케스트레이션 기반의 사가에 연계하는 일은 어려움.
    -   이벤트 저장소의 트랜잭션 개념이 상당히 제한적

### 사가에서 반드시 원자적으로 수행되어야 하는 액션

-   <b>사가 생성</b>: 사가를 시작한 서비스는 원자적으로 애그리거트를 생성/수정하고 사가 오케스트레이터를 생성해야 한다.
-   <b>사가 오케스트레이션</b>: 사가 오케스트레이터는 원자적으로 응답을 소비하고, 자신의 상태를 업데이트한 후 커맨드 메시지를 전송해야 한다.
-   <b>사가 참여자</b>: 사가 참여자는 원자적으로 메시지를 소비하고, 중복 메시지를 솎아 내고, 애그리거트를 생성/수정하고, 응답 메시지를 전송해야 한다.

-   이벤트 저장소의 RDBMS/NoSQL 사용 여부는 이벤트 소싱과 오케스트레이션 사가의 연계 가능성을 가늠하는 핵심 기준

<br />

## 6.3.1 코레오그래피 사가 구현: 이벤트 소싱
